import{a as oe}from"./chunk-WCHE2QXK.js";import{a as F}from"./chunk-OQLYQHRI.js";import{a as ae}from"./chunk-RGF7OKZJ.js";import{$ as ee,$a as xe,A as f,Aa as z,B as Y,C,Ca as se,D as N,Da as ce,E as $,F as j,G as u,H as r,I as a,J as w,Ka as me,N as Z,O as J,P as b,Q as m,R as o,Ra as de,S as K,Sa as pe,T as W,Ta as ue,U as X,Ua as _e,Va as fe,W as c,Wa as Ce,X as y,Y as q,Ya as he,Z as R,Za as I,_a as ge,ab as we,ba as d,bb as be,ca as _,cb as ye,da as te,db as Se,eb as De,f as O,fa as ie,fb as ve,g as H,gb as Te,ha as D,hb as Me,i as L,ib as Re,jb as Fe,k as Q,ka as ne,kb as Ie,lb as k,m as h,o as g,p as x,q as U,s as v,u as s,v as B,w as T,wa as re,x as M,y as S,ya as le}from"./chunk-GCSD6NER.js";var A=class i{#e=h(U);#n;#t=h(ae);#i=h(F);#o=v(null);#a=v(!1);#r=v([]);#l;get service(){return this.#n}get paginationRequest(){return this.#t}get pagedResponse(){return this.#o()}get showForm(){return this.#a()}get displayedColumns(){return this.#r()}get item(){return this.#l}set service(e){this.#n=this.#e.get(e)}set paginationRequest(e){this.#t.skip=e.pageIndex*e.pageSize,this.#t.limit=e.pageSize}set pagedResponse(e){this.#o.set(e)}set showForm(e){this.#a.set(e)}set displayedColumns(e){this.#r.set(e)}set item(e){this.#l=e}getAll(){return this.service.getAll(this.paginationRequest)}add(e=!0){this.service.add(this.item).subscribe({next:()=>{e&&(this.showForm=!1,window.location.reload()),this.item=null,this.#i.success("Added successfully")},error:()=>{this.item=null}})}update(e=!0){this.service.update(this.item).subscribe({next:()=>{e&&(this.showForm=!1,window.location.reload()),this.item=null,this.#i.success("Updated successfully")}})}delete(e){return this.service.delete(e.map(t=>t.id??""))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Q({token:i,factory:i.\u0275fac,providedIn:"root"})};var E=class i{constructor(e,t){this.dialogRef=e;this.data=t}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||i)(B(de),B(pe))};static \u0275cmp=T({type:i,selectors:[["app-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["align","center"],[1,"btn","btn-primary","mx-3",3,"click"],[1,"btn","btn-danger","mx-3",3,"click"]],template:function(t,n){t&1&&(r(0,"h2",0),c(1),a(),r(2,"mat-dialog-content"),c(3),a(),r(4,"mat-dialog-actions",1)(5,"button",2),m("click",function(){return n.onCancel()}),c(6,"Cancel"),a(),r(7,"button",3),m("click",function(){return n.onConfirm()}),c(8,"Confirm"),a()()),t&2&&(s(),y(n.data.title),s(2),y(n.data.message))},dependencies:[k,_e,Ce,fe],encapsulation:2})};var V=class i{transform(e){return e?e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(t,n)=>+t==0?"":n===0?t.toLowerCase():t.toUpperCase()):""}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=M({name:"camelCase",type:i,pure:!0})};var P=class i{transform(e,...t){return e.replace(/ /g,"")}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=M({name:"noSpace",type:i,pure:!0})};var Pe=()=>[5,10,50,100];function Be(i,e){if(i&1&&(r(0,"div",2)(1,"label",23),c(2,"Search:"),a(),w(3,"input",24),a()),i&2){let t=o();s(3),u("formControl",t.searchInput)}}function Ne(i,e){if(i&1){let t=b();r(0,"span",25),m("click",function(){g(t);let l=o();return x(l.add())}),c(1,"add"),a()}}function $e(i,e){if(i&1){let t=b();r(0,"span",26),m("click",function(){g(t);let l=o();return x(l.openDeleteConfirmation())}),c(1,"delete"),a()}}function je(i,e){if(i&1&&(w(0,"input",27),r(1,"label",28),c(2),a()),i&2){let t=o().$implicit,n=o();u("id",R(t))("value",R(t))("formControl",n.searchBy),s(),u("for",R(t)),s(),y(t)}}function qe(i,e){if(i&1&&f(0,je,3,8),i&2){let t=e.$implicit;C(t!="select"&&t!="action"?0:-1)}}function ze(i,e){i&1&&(r(0,"th",29),w(1,"b"),a())}function Oe(i,e){i&1&&S(0,ze,2,0,"th",32)}function He(i,e){if(i&1){let t=b();r(0,"th",29)(1,"mat-checkbox",33),m("change",function(l){g(t);let p=o(3);return x(l?p.masterToggle():null)}),a()()}if(i&2){let t=o(3);s(),u("checked",t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function Le(i,e){i&1&&S(0,He,2,2,"th",32)}function Qe(i,e){if(i&1&&(r(0,"th",30)(1,"b"),c(2),a()()),i&2){let t=o(2).$implicit;s(2),y(t)}}function Ue(i,e){i&1&&S(0,Qe,3,1,"th",34)}function Ye(i,e){if(i&1){let t=b();r(0,"mat-checkbox",37),m("click",function(l){return g(t),x(l.stopPropagation())})("change",function(l){g(t);let p=o().$implicit,Ae=o(2);return x(l?Ae.selection.toggle(p):null)}),a()}if(i&2){let t=o().$implicit,n=o(2);u("checked",n.selection.isSelected(t))}}function Ze(i,e){if(i&1){let t=b();r(0,"span",40),m("click",function(){g(t);let l=o(2).$implicit,p=o(2);return x(p.edit(l))}),c(1,"edit"),a()}}function Je(i,e){if(i&1){let t=b();r(0,"span",41),m("click",function(){g(t);let l=o(2).$implicit,p=o(2);return x(p.openDeleteConfirmation(l))}),c(1,"delete"),a()}}function Ke(i,e){if(i&1&&(f(0,Ze,2,0,"span",38),f(1,Je,2,0,"span",39)),i&2){let t=o(3);C(t.showEdit()?0:-1),s(),C(t.showDelete()?1:-1)}}function We(i,e){if(i&1){let t=b();r(0,"span",41),m("click",function(){g(t);let l=o(2).$implicit,p=o(2);return x(p.openDeleteConfirmation(l))}),c(1),d(2,"camelCase"),d(3,"noSpace"),a()}if(i&2){let t=o(2).$implicit,n=o().$implicit;s(),y(t[_(3,3,_(2,1,n))]==!0?"check":"close")}}function Xe(i,e){if(i&1&&(c(0),d(1,"camelCase"),d(2,"noSpace"),d(3,"date")),i&2){let t=o(2).$implicit,n=o().$implicit;q(" ",te(3,5,t[_(2,3,_(1,1,n))],"longDate")," ")}}function et(i,e){if(i&1&&(c(0),d(1,"camelCase"),d(2,"noSpace")),i&2){let t=o(2).$implicit,n=o().$implicit;q(" ",t[_(2,3,_(1,1,n))]," ")}}function tt(i,e){if(i&1&&(f(0,We,4,5,"span",39),d(1,"camelCase"),d(2,"noSpace"),d(3,"camelCase"),d(4,"noSpace"),Y(5,Xe,4,8)(6,et,3,5)),i&2){let t=o().$implicit,n=o().$implicit,l=o();C(typeof t[_(2,3,_(1,1,n))]=="boolean"?0:l.isValidDate(t[_(4,7,_(3,5,n))])?5:6)}}function it(i,e){if(i&1&&(r(0,"td",35),f(1,Ye,1,1,"mat-checkbox",36)(2,Ke,2,2)(3,tt,7,9),a()),i&2){let t=o().$implicit;s(),C(t=="select"?1:t=="action"?2:3)}}function nt(i,e){if(i&1&&(Z(0,9),f(1,Oe,1,0,"th",29)(2,Le,1,0,"th",29)(3,Ue,1,0,"th",30),S(4,it,4,1,"td",31),J()),i&2){let t=e.$implicit;u("matColumnDef",t),s(),C(t=="action"?1:t=="select"?2:3)}}function ot(i,e){i&1&&w(0,"tr",42)}function at(i,e){i&1&&w(0,"tr",43)}var ke=class i{#e=h(A);#n=h(F);#t=h(ue);#i=h(oe);showAdd=D(!0);showEdit=D(!0);showDelete=D(!0);showDeleteAll=D(!0);showSearch=D(!0);pagedItems=[];searchInput=new z("");dataSource=new Ie;selection=new he(!0,[]);paginator;searchBy=new z(this.displayedColumns[1]);get length(){return this.#e.pagedResponse?.count}get pageSize(){return this.#e.paginationRequest.limit}get currentPage(){return this.#e.paginationRequest.skip/this.pageSize+1}get showForm(){return this.#e.showForm}get displayedColumns(){return this.#e.displayedColumns}get item(){return this.#e.item}get gridService(){return this.#e}get enableMultiSelection(){return this.#i.enableMultiSelection}set showForm(e){this.#e.showForm=e}set displayedColumns(e){this.#e.displayedColumns=e}set item(e){this.#e.item=e}constructor(){this.#i.enableMultiSelection||(this.displayedColumns=this.displayedColumns.filter(e=>e!="select")),this.displayedColumns.includes("action")||this.displayedColumns.push("action"),this.searchInput.valueChanges.pipe(O(400),H(),L(e=>(!e||e.length<0?this.#e.paginationRequest.filters=null:this.#e.paginationRequest.filters=[{key:this.searchBy.value,value:e,operator:"Like"}],this.#e.getAll()))).subscribe(e=>{this.#e.pagedResponse=e,this.dataSource.data=this.#e.pagedResponse?.items??[]}),ie(()=>{this.dataSource.data=this.#e.pagedResponse?.items??[]})}ngAfterViewInit(){this.paginator.page.subscribe(e=>{this.#e.paginationRequest=e,this.getAll()})}isAllSelected(){let e=this.selection.selected.length,t=this.dataSource.data.length;return e===t}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}onSort(e){this.#e.paginationRequest.sortBy=e.active,this.#e.paginationRequest.ascending=e.direction=="asc",this.getAll()}getAll(){this.#e.getAll().subscribe({next:e=>{this.#e.pagedResponse=e,this.selection.clear()}})}add(){this.showForm=!0}edit(e){this.item=e,this.showForm=!0}openDeleteConfirmation(e){this.#t.open(E,{width:"350px",data:{title:"Confirm Delete",message:"Are you sure you want to delete this user?"}}).afterClosed().subscribe(n=>{n&&this.delete(e)})}delete(e){let t=e?[e]:this.selection.selected;this.#e.delete(t).subscribe({next:()=>{this.getAll(),this.#n.success("Deleted successfully")}})}isValidDate(e){if(typeof e!="string")return!1;let t=new Date(e);return!isNaN(t.getTime())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=T({type:i,selectors:[["app-grid"]],viewQuery:function(t,n){if(t&1&&K(I,5),t&2){let l;W(l=X())&&(n.paginator=l.first)}},inputs:{showAdd:[1,"showAdd"],showEdit:[1,"showEdit"],showDelete:[1,"showDelete"],showDeleteAll:[1,"showDeleteAll"],showSearch:[1,"showSearch"]},decls:31,vars:10,consts:[[1,"mat-elevation-z8"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-start","py-3","align-items-center"],[1,"justify-content-end","py-3"],["role","button",1,"text","text-primary","material-icons-round","mx-1","display-6"],["role","button",1,"text","text-danger","material-icons-round","display-6"],[1,"py-3","flex","justify-content-between"],[1,"fw-bold","mx-3"],["mat-table","","matSort","",3,"matSortChange","dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","length","pageSizeOptions"],["id","confirmModal","tabindex","-1","aria-labelledby","confirmModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","confirmModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","id","confirmDeleteBtn",1,"btn","btn-danger"],["for","searchInput",1,"form-label"],["id","searchInput",1,"form-control","mx-3",3,"formControl"],["role","button",1,"text","text-primary","material-icons-round","mx-1","display-6",3,"click"],["role","button",1,"text","text-danger","material-icons-round","display-6",3,"click"],["type","radio","name","role",1,"form-check-input","mx-2",3,"id","value","formControl"],[1,"form-check-label",3,"for"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",4,"matCellDef"],["mat-header-cell","",4,"matHeaderCellDef"],["color","primary",3,"change","checked","indeterminate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell",""],["color","primary",3,"checked"],["color","primary",3,"click","change","checked"],["role","button",1,"text","text-primary","material-icons-round","mx-1"],["role","button",1,"text","text-danger","material-icons-round","mx-1"],["role","button",1,"text","text-primary","material-icons-round","mx-1",3,"click"],["role","button",1,"text","text-danger","material-icons-round","mx-1",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1),f(2,Be,4,1,"div",2),r(3,"div",3),f(4,Ne,2,0,"span",4),f(5,$e,2,0,"span",5),a()(),r(6,"div",6)(7,"span",7),c(8,"Search By:"),a(),$(9,qe,1,1,null,null,N),a(),r(11,"table",8),m("matSortChange",function(p){return n.onSort(p)}),$(12,nt,5,2,"ng-container",9,N),S(14,ot,1,0,"tr",10)(15,at,1,0,"tr",11),a(),w(16,"mat-paginator",12),a(),r(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16)(21,"h5",17),c(22,"Confirm Action"),a(),w(23,"button",18),a(),r(24,"div",19),c(25," Are you sure you want to delete this item? "),a(),r(26,"div",20)(27,"button",21),c(28,"Cancel"),a(),r(29,"button",22),c(30,"Yes, Delete"),a()()()()()),t&2&&(s(2),C(n.showSearch()?2:-1),s(2),C(n.showAdd()?4:-1),s(),C(n.selection.hasValue()&&n.showDeleteAll()?5:-1),s(4),j(n.displayedColumns),s(2),u("dataSource",n.dataSource),s(),j(n.displayedColumns),s(2),u("matHeaderRowDef",n.displayedColumns),s(),u("matRowDefColumns",n.displayedColumns),s(),u("pageSize",n.pageSize)("length",n.length)("pageSizeOptions",ee(9,Pe)))},dependencies:[k,re,se,le,ce,I,we,ye,Te,Se,be,Me,De,ve,Re,Fe,me,ge,xe,ne,V,P],styles:["table[_ngcontent-%COMP%]{border:1px solid;border-collapse:collapse;table-layout:auto;width:auto}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;white-space:nowrap}.mat-column-select[_ngcontent-%COMP%], .mat-column-action[_ngcontent-%COMP%]{width:5%}"]})};export{A as a,E as b,ke as c};
