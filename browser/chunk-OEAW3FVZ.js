import{b}from"./chunk-MTLU5R6D.js";import"./chunk-JO3BUMT2.js";import{a as G}from"./chunk-N6SSOG74.js";import{a as S}from"./chunk-RT3T3EPV.js";import{a as T,b as q}from"./chunk-REQF3J2D.js";import{a as P}from"./chunk-OQLYQHRI.js";import"./chunk-RGF7OKZJ.js";import{A as d,Ba as y,C as l,Ea as N,Fa as I,G as w,H as r,I as t,J as c,Ja as M,Q as h,R as p,W as n,X as f,lb as F,m,sa as C,ta as v,u as a,w as g,wa as x,xa as u,ya as E,za as _}from"./chunk-GCSD6NER.js";function R(o,s){if(o&1&&(r(0,"small",8),n(1),t()),o&2){let e=p();a(),f(e.getErrorMessage(e.form,"oldPassword"))}}function V(o,s){if(o&1&&(r(0,"small",8),n(1),t()),o&2){let e=p();a(),f(e.getErrorMessage(e.form,"password"))}}function j(o,s){if(o&1&&(r(0,"small",8),n(1),t()),o&2){let e=p();a(),f(e.getErrorMessage(e.form,"confirmPassword"))}}var D=class o{#e=m(b);#o=m(S);#r=m(M);#n=m(C);#t=m(P);form;constructor(){this.form=this.#r.group({oldPassword:["",u.required],password:["",u.required],confirmPassword:["",u.required]},{validators:G})}get getErrorMessage(){return q}get isInvalid(){return T}onSubmit(){let s={username:this.#e?.user?.username??"",password:this.form.value.oldPassword??"",newPassword:this.form.value.password};this.#o.changePassword(s).subscribe({next:e=>{this.#t.success("Password changed successfully!"),this.#e.clearToken(),this.#n.navigate(["/login"])},error:e=>{this.#t.error("Failed to change password: "+e.message)}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=g({type:o,selectors:[["app-change-password"]],decls:26,vars:5,consts:[[1,"container","vh-100","d-flex","justify-content-center","align-items-center"],[1,"card","shadow",2,"width","100%","max-width","400px"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","oldPassword",1,"form-label"],["id","oldPassword","type","password","formControlName","oldPassword",1,"form-control"],[1,"text-danger"],["for","newPassword",1,"form-label"],["id","newPassword","type","password","formControlName","password",1,"form-control"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","type","password","formControlName","confirmPassword",1,"form-control"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/home",1,"btn","btn-danger"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),n(4,"Change Password"),t(),r(5,"form",4),h("ngSubmit",function(){return i.onSubmit()}),r(6,"div",5)(7,"label",6),n(8,"Old Password"),t(),c(9,"input",7),d(10,R,2,1,"small",8),t(),r(11,"div",5)(12,"label",9),n(13,"New Password:"),t(),c(14,"input",10),d(15,V,2,1,"small",8),t(),r(16,"div",5)(17,"label",11),n(18,"Confirm Password:"),t(),c(19,"input",12),d(20,j,2,1,"small",8),t(),r(21,"div",13)(22,"button",14),n(23," Submit "),t(),r(24,"button",15),n(25,"Cancel"),t()()()()()()),e&2&&(a(5),w("formGroup",i.form),a(5),l(i.isInvalid(i.form,"oldPassword")?10:-1),a(5),l(i.isInvalid(i.form,"password")?15:-1),a(5),l(i.isInvalid(i.form,"confirmPassword")?20:-1),a(2),w("disabled",i.form.invalid))},dependencies:[F,y,x,E,_,N,I,v],encapsulation:2})};export{D as ChangePasswordComponent};
