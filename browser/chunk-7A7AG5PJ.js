import{a as w}from"./chunk-4JPPIM7Y.js";import{a as j}from"./chunk-JO3BUMT2.js";import{a as y,b as ee,c as E}from"./chunk-6EOEJYSQ.js";import"./chunk-BYXBJQAS.js";import"./chunk-WCHE2QXK.js";import{a as Z,b as W}from"./chunk-REQF3J2D.js";import{a as B}from"./chunk-OQLYQHRI.js";import"./chunk-RGF7OKZJ.js";import{A as b,Ba as H,C as S,D as _,E as x,Ea as K,F as D,Fa as L,G as u,Ga as U,H as a,Ha as X,I as i,Ia as $,J as g,Ja as z,P as G,Q as C,R as p,S as N,T as V,Ta as J,U as I,W as n,X as R,Y as c,_ as T,fa as M,lb as Y,m as s,o as f,p as h,qa as q,u as m,w as k,wa as O,xa as v,ya as P,za as Q}from"./chunk-GCSD6NER.js";var A=(r=>(r.Added="Added",r.Started="Started",r.Archived="Archived",r.Completed="Completed",r))(A||{});var F=(d=>(d.Steam="Steam",d.EpicGames="EpicGames",d.EA="EA",d.GOG="GOG",d.Koyso="Koyso",d.XBox="XBox",d))(F||{});function ie(o,t){if(o&1&&(a(0,"small",17),n(1),i()),o&2){let e=p(2);m(),R(e.getErrorMessage(e.form,"name"))}}function oe(o,t){if(o&1&&(a(0,"option",21),n(1),i()),o&2){let e=t.$implicit;u("value",e),m(),c(" ",e," ")}}function ae(o,t){if(o&1&&(a(0,"option",21),n(1),i()),o&2){let e=t.$implicit;u("value",e),m(),c(" ",e," ")}}function ne(o,t){if(o&1){let e=G();a(0,"div",0)(1,"div",10)(2,"div",11)(3,"h4",12),n(4),i(),a(5,"form",13),C("ngSubmit",function(){f(e);let r=p();return h(r.onSubmit())}),a(6,"div",14)(7,"label",15),n(8,"Name:"),i(),g(9,"input",16),b(10,ie,2,1,"small",17),i(),a(11,"div",14)(12,"label",18),n(13,"Status:"),i(),a(14,"select",19)(15,"option",20),n(16,"Choose..."),i(),x(17,oe,2,2,"option",21,_),i()(),a(19,"div",14)(20,"label",22),n(21,"Website:"),i(),a(22,"select",23)(23,"option",20),n(24,"Choose..."),i(),x(25,ae,2,2,"option",21,_),i()(),a(27,"div",24)(28,"button",25),n(29),i(),a(30,"button",26),C("click",function(){f(e);let r=p();return h(r.refresh())}),n(31," Back "),i()()()()()()}if(o&2){let e=p();m(4),c(" ",e.item?"Update":"Add"," "),m(),u("formGroup",e.form),m(5),S(e.isInvalid(e.form,"name")?10:-1),m(7),D(e.statuses),m(8),D(e.websites),m(4),c(" ",e.item?"Update":"Add"," ")}}function re(o,t){if(o&1){let e=G();a(0,"button",27),C("click",function(){f(e);let r=p();return h(r.getRandomGame())}),n(1,` Pick random Game
`),i(),g(2,"app-grid",28)}o&2&&(m(2),u("showDeleteAll",!1))}var te=class o{#t=s(z);#i=s(q);#o=s(B);#e=s(y);#a=s(w);#n=s(J);form;statuses=Object.keys(A);websites=Object.keys(F);gameDetail;gridComponent;get getErrorMessage(){return W}get isInvalid(){return Z}get item(){return this.#e.item}get showForm(){return this.#e.showForm}set item(t){this.#e.item=t}set showForm(t){this.#e.showForm=t}constructor(){this.#e.service=w,this.#e.pagedResponse=this.#i.snapshot.data.pagedResponse,this.#e.displayedColumns=["select","Name","Status","Website","Start Date","Archive Date","Completion Date"],this.form=this.#t.group({name:["",[v.required]],status:["Added",[v.required]],website:["",[v.required]],startDate:[null],archiveDate:[null],completionDate:[null]}),M(()=>{this.showForm&&this.form.patchValue(this.item??{})})}onSubmit(){let t=this.form.value;t.status=="Started"&&t.startDate==null?t.startDate=new Date:t.status=="Archived"&&t.archiveDate==null?t.archiveDate=new Date:t.status=="Completed"&&t.completionDate==null&&(t.completionDate=new Date),this.form.valid?this.item?(t.id=this.item.id,this.item=t,this.#e.update()):(this.item=t,this.#e.add(!1)):this.#o.error("Invalid form.")}refresh(){window.location.reload()}getRandomGame(){let t={filters:[{key:j.status,value:"Added",operator:"Equal"}],fetchAll:!0,ascending:!1,isDeleted:!1};this.#a.getAll(t).subscribe(e=>{let l=Math.floor(Math.random()*e.items.length);this.gameDetail=e.items[l],this.gameDetail&&this.openGameDialog()})}openGameDialog(){this.#n.open(ee,{width:"350px",data:{title:"Hope you enjoy this!!",message:this.gameDetail?.name}}).afterClosed().subscribe(e=>{e&&(this.gameDetail!=null&&(this.gameDetail.status="Started",this.gameDetail.startDate=new Date),this.item=this.gameDetail,this.#e.update())})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=k({type:o,selectors:[["app-game-stash"]],viewQuery:function(e,l){if(e&1&&N(E,5),e&2){let r;V(r=I())&&(l.gridComponent=r.first)}},features:[T([y])],decls:14,vars:2,consts:[[1,"container","vh-100","d-flex","justify-content-center","align-items-center"],["id","pickedGameDialog","tabindex","-1","aria-labelledby","confirmModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","confirmModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"card","shadow",2,"width","100%","max-width","400px"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","formControlName","name",1,"form-control"],[1,"text-danger"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select"],["value",""],[3,"value"],["for","website",1,"form-label"],["id","website","formControlName","website",1,"form-select"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary"],[1,"btn",3,"click"],[1,"btn","btn-primary","mb-3",3,"click"],[3,"showDeleteAll"]],template:function(e,l){e&1&&(b(0,ne,32,4,"div",0)(1,re,3,1),a(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h5",5),n(7,"Hope you enjoy this!!"),i(),g(8,"button",6),i(),a(9,"div",7),n(10),i(),a(11,"div",8)(12,"button",9),n(13,"Close"),i()()()()()),e&2&&(S(l.showForm?0:1),m(10),c(" ",l.gameDetail==null?null:l.gameDetail.name," "))},dependencies:[E,Y,H,X,$,O,U,P,Q,K,L],encapsulation:2})};export{te as GameStashComponent};
